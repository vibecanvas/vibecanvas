---
import BaseLayout from "../layouts/BaseLayout.astro";
import CommandTabs from "../components/CommandTabs";

const rawBase = import.meta.env.BASE_URL;
const base = rawBase.endsWith("/") ? rawBase : `${rawBase}/`;
const docsHref = `${base}docs`;
const heroDesktopPngHref = `${base}1200x675.png`;
const heroDesktopWebpHref = `${base}1200x675.webp`;
const heroMobilePngHref = `${base}338x600.png`;
const heroMobileWebpHref = `${base}338x600.webp`;
---

<BaseLayout
  title="Vibecanvas - Build with agents on an infinite canvas"
  description="Learn how to install and use Vibecanvas, then dive into the docs."
>
  <div class="shell">
    <header class="topbar">
      <a href={base} class="brand" aria-label="Vibecanvas home">
        <span class="brand-wordmark">VIBECANVAS</span>
      </a>
      <nav class="topnav">
        <a href={docsHref}>Docs</a>
        <a href="https://github.com/vibecanvas/vibecanvas" target="_blank" rel="noreferrer">GitHub</a>
      </nav>
    </header>

    <section class="hero">
      <h1>Put OpenCode in an infinite canvas.</h1>
      <p class="lead">Sketch ideas, talk with your agent, and ship code in one workspace.</p>
      <figure class="hero-gif-frame">
        <picture>
          <source media="(max-width: 900px)" srcset={heroMobileWebpHref} type="image/webp" />
          <source media="(max-width: 900px)" srcset={heroMobilePngHref} type="image/png" />
          <source srcset={heroDesktopWebpHref} type="image/webp" />
          <img
            src={heroDesktopPngHref}
            alt="Vibecanvas product preview"
            width="1200"
            height="675"
            loading="eager"
          />
        </picture>
      </figure>
      <div class="hero-cta">
        <a class="btn btn-primary" href={docsHref}>Read Docs</a>
        <a class="btn btn-ghost" href="https://github.com/vibecanvas/vibecanvas" target="_blank" rel="noreferrer">View Repository</a>
      </div>
    </section>

    <section class="panel">
      <h2>Install Vibecanvas</h2>
      <p>Install with one command.</p>
      <CommandTabs client:load />
    </section>

    <section class="steps-grid">
      <article class="panel">
        <h3>1. Install and set up OpenCode</h3>
        <p>Install OpenCode, then run it once to complete auth in the CLI.</p>
        <pre><code>bun add -g opencode-ai
opencode</code></pre>
      </article>
      <article class="panel">
        <h3>2. Launch Vibecanvas</h3>
        <p>After install, start Vibecanvas from any project folder.</p>
        <pre><code>vibecanvas
vibecanvas upgrade --check</code></pre>
      </article>
      <article class="panel">
        <h3>3. Open docs while building</h3>
        <p>Use the docs section for setup, canvas flow, agent usage, and troubleshooting.</p>
        <a class="inline-link" href={docsHref}>Go to /docs</a>
      </article>
    </section>
  </div>
</BaseLayout>
